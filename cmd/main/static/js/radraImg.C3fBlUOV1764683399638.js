import{F as e,K as a}from"./@tresjs.CJvYCGUA1764683399638.js";import{$ as t,p as s,e as i}from"./three-tile.nLdI1RRs1764683399638.js";import{s as o,c as r,a as n,i as p}from"./informationDiv.BjYFzlWi1764683399638.js";import"./index.DM693cYN1764683399638.js";import{u as l}from"./useTexture.RJnyBWqC1764683399638.js";import{d as m,ad as c,w as d,G as u,o as j,u as h,I as g,r as f,a as y,F as v,e as x,f as b,h as w,m as _,ah as S,b as T,a9 as I,aa as k}from"./@vue.DjQnunkc1764683399638.js";import{c1 as D,a6 as z,z as B,V as M}from"./three.BbguFgn81764683399638.js";import{P}from"./tweakpane.CqZAnw7f1764683399638.js";import"./postprocessing.DjqPXL_K1764683399638.js";import"./@vueuse.BBrxj3Xz1764683399638.js";/* empty css                                                                                    */import"./@fesjs.CQdxRiFD1764683399638.js";import"./vue-router.CW9J5iK31764683399638.js";import"./lodash-es.DWe8oqPO1764683399638.js";import"./pinia.yp40krTn1764683399638.js";import"./@qlin.y-0Z8WnK1764683399638.js";import"./@babel.BPq7uOAK1764683399638.js";import"./@floating-ui.Bhq4ibgf1764683399638.js";import"./@juggle.Vc7cP4_P1764683399638.js";import"./chalk.BHLFMujs1764683399638.js";/* empty css                                 */import"./iconify-icon.Dg3Wmqac1764683399638.js";import"./@iconify.Db0UMRdG1764683399638.js";import"./vite-plugin-qiankun.B06WoCqG1764683399638.js";import"./dompurify.C4MEnGDh1764683399638.js";import"./color.D_UQSrzA1764683399638.js";import"./color-string.cWrXb_cU1764683399638.js";import"./color-name.gyPnsvCn1764683399638.js";import"./lodash.OvYRBTRe1764683399638.js";import"./@amap.fjyZdsU91764683399638.js";import"./object-hash.C0HZ2EUZ1764683399638.js";import"./jszip.CqykFGTv1764683399638.js";import"./oimophysics.CfVKSiAm1764683399638.js";import"./three-stdlib.CqpxBIJB1764683399638.js";import"./@pmndrs.CRF-_adI1764683399638.js";import"./axios.Bl1IyXmH1764683399638.js";const L=["position"],G=["scale","material","rotateX","position-y"],A=m({__name:"radraImgShow",props:{map:{},height:{default:100},opacity:{default:.6}},async setup(e){let a,t;const s=e,i=new D({displacementMap:new B,transparent:!0,side:z,opacity:s.opacity,displacementScale:.5,displacementBias:0});i.onBeforeCompile=e=>{e.vertexShader="uniform sampler2D map;\n\t"+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <displacementmap_vertex>","transformed += normalize( objectNormal ) * ( texture2D(map, vMapUv ).a * displacementScale + displacementBias );")};const r=s.map.geo2pos(new M(105,34,0));r.applyMatrix4(s.map.matrix);const n=o(s.map,{x:67,y:11},{x:140,y:57},1e3*s.height),p=[];for(let o=0;o<9;o++)p.push(`https://opensource.cdn.icegl.cn/images/simpleGIS/QPFRef_202405311${o}40.png`);let m=0;const f=([a,t]=c(()=>l(p)),a=await a,t(),a);i.map=f[m],d(()=>[s.color,s.opacity],([e,a])=>{i.opacity=a});let y=null,v=!1;return v?(clearInterval(y),y=null,v=!1):(y=setInterval(()=>{m=m<p.length-1?m+1:0,i.map=f[m],i.needsUpdate=!0,console.log(m)},1e3),v=!0),(e,a)=>(j(),u("TresGroup",{position:[...h(r)]},[g("TresMesh",{scale:[h(n).x,h(n).y,1e3*e.height],material:h(i),rotateX:-Math.PI/2,renderOrder:9999,"position-y":1e3*e.height/5},[...a[0]||(a[0]=[g("TresPlaneGeometry",{args:[1,1,529,420]},null,-1)])],8,G)],8,L))}}),C=["object"],F="pk.eyJ1IjoiaGF3azg2MTA0IiwiYSI6ImNrbTQ3cWtyeTAxejEzMHBtcW42bmc0N28ifQ.bvS9U_yWdHDh41jzaDS1dw",W=m({__name:"mapBoxShow3",setup(a){const o=f({height:200,opacity:1}),p=new P({title:"参数"});p.addBinding(o,"height",{label:"高度",min:10,max:300,step:1}),p.addBinding(o,"opacity",{label:"透明度",min:0,max:1,step:.1}),new t({token:F,dataType:"image",style:"mapbox.satellite"}),new t({token:F,dataType:"terrain-rgb",style:"mapbox.terrain-rgb",maxLevel:15});const l=new s({imgSource:[new i({style:"6"}),new i({style:"8"})],lon0:90,minLevel:2,maxLevel:20});l.rotateX(-Math.PI/2);const m=new M(105,34,0),c=new M(110,0,1e7),T=l.localToWorld(l.geo2map(m)),I=l.localToWorld(l.geo2map(c)),k=y(),{camera:D,controls:z,scene:B,renderer:L}=e();return D.value&&D.value.position.copy(I),d(()=>z.value,e=>{e&&(e.target.copy(T),r(e,D.value,B.value))}),d(()=>k.value,e=>{e&&e.target.position.copy(T)}),n(D.value,L.domElement,l),(e,a)=>(j(),u(v,null,[g("TresDirectionalLight",{ref_key:"tdLight",ref:k,position:[0,2e3,1e3],intensity:1},null,512),g("primitive",{object:h(l)},null,8,C),(j(),x(S,null,{default:b(()=>[w(A,_({map:h(l)},o),null,16,["map"])]),_:1}))],64))}}),q=m({__name:"radraImg",setup(e){const t=f({clearColor:"#dbf0ff",alpha:!0,antialias:!1,logarithmicDepthBuffer:!0,precision:"highp"}),s=f({enableDamping:!0,makeDefault:!0,screenSpacePanning:!1,dampingFactor:.035,keyPanSpeed:5});return(e,i)=>{const o=T("TresCanvas");return j(),u(v,null,[w(o,_(t,{"window-size":""}),{default:b(()=>[i[0]||(i[0]=g("TresPerspectiveCamera",{position:[0,12,0],fov:70,near:.1,far:4e10},null,-1)),w(h(a),I(k(s)),null,16),i[1]||(i[1]=g("TresAmbientLight",{intensity:1},null,-1)),w(W)]),_:1},16),w(p)],64)}}});export{q as default};
