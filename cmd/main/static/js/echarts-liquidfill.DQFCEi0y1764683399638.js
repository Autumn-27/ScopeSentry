import{e,c as t,S as a,a as i,b as r,p as n,i as l,u as s,d as o,f as h,m as d,g as u}from"./echarts.BqGvY13C1764683399638.js";import{W as p,N as g,a1 as v,V as c,F as m,J as y}from"./zrender.CTcN8siY1764683399638.js";e({type:"series.liquidFill",optionUpdated:function(){var e=this.option;e.gridSize=Math.max(Math.floor(e.gridSize),4)},getInitialData:function(e,i){var r=t(e.data,{coordDimensions:["value"]}),n=new a(r,this);return n.initData(e.data),n},defaultOption:{color:["#294D99","#156ACF","#1598ED","#45BDFF"],center:["50%","50%"],radius:"50%",amplitude:"8%",waveLength:"80%",phase:"auto",period:"auto",direction:"right",shape:"circle",waveAnimation:!0,animationEasing:"linear",animationEasingUpdate:"linear",animationDuration:2e3,animationDurationUpdate:1e3,outline:{show:!0,borderDistance:8,itemStyle:{color:"none",borderColor:"#294D99",borderWidth:8,shadowBlur:20,shadowColor:"rgba(0, 0, 0, 0.25)"}},backgroundStyle:{color:"#E3F7FF"},itemStyle:{opacity:.95,shadowBlur:50,shadowColor:"rgba(0, 0, 0, 0.4)"},label:{show:!0,color:"#294D99",insideColor:"#fff",fontSize:50,fontWeight:"bold",align:"center",baseline:"middle",position:"inside"},emphasis:{itemStyle:{opacity:.8}}}});const f=i({type:"ec-liquid-fill",shape:{waveLength:0,radius:0,radiusY:0,cx:0,cy:0,waterLevel:0,amplitude:0,phase:0,inverse:!1},buildPath:function(e,t){null==t.radiusY&&(t.radiusY=t.radius);for(var a=Math.max(2*Math.ceil(2*t.radius/t.waveLength*4),8);t.phase<2*-Math.PI;)t.phase+=2*Math.PI;for(;t.phase>0;)t.phase-=2*Math.PI;var i=t.phase/Math.PI/2*t.waveLength,r=t.cx-t.radius+i-2*t.radius;e.moveTo(r,t.waterLevel);for(var n=0,l=0;l<a;++l){var s=l%4,o=w(l*t.waveLength/4,s,t.waveLength,t.amplitude);e.bezierCurveTo(o[0][0]+r,-o[0][1]+t.waterLevel,o[1][0]+r,-o[1][1]+t.waterLevel,o[2][0]+r,-o[2][1]+t.waterLevel),l===a-1&&(n=o[2][0])}t.inverse?(e.lineTo(n+r,t.cy-t.radiusY),e.lineTo(r,t.cy-t.radiusY),e.lineTo(r,t.waterLevel)):(e.lineTo(n+r,t.cy+t.radiusY),e.lineTo(r,t.cy+t.radiusY),e.lineTo(r,t.waterLevel)),e.closePath()}});function w(e,t,a,i){return 0===t?[[e+.5*a/Math.PI/2,i/2],[e+.5*a/Math.PI,i],[e+a/4,i]]:1===t?[[e+.5*a/Math.PI/2*(Math.PI-2),i],[e+.5*a/Math.PI/2*(Math.PI-1),i/2],[e+a/4,0]]:2===t?[[e+.5*a/Math.PI/2,-i/2],[e+.5*a/Math.PI,-i],[e+a/4,-i]]:[[e+.5*a/Math.PI/2*(Math.PI-2),-i],[e+.5*a/Math.PI/2*(Math.PI-1),-i/2],[e+a/4,0]]}var M=n;function I(e){return e&&0===e.indexOf("path://")}r({type:"liquidFill",render:function(e,t,a){var i=this,r=this.group;r.removeAll();var n=e.getData(),w=n.getItemModel(0),P=w.get("center"),b=w.get("radius"),L=a.getWidth(),x=a.getHeight(),S=Math.min(L,x),C=0,D=0,F=e.get("outline.show");F&&(C=e.get("outline.borderDistance"),D=M(e.get("outline.itemStyle.borderWidth"),S));var T,E,Y,z=M(P[0],L),A=M(P[1],x),W=!1,B=e.get("shape");("container"===B?(W=!0,E=[(T=[L/2,x/2])[0]-D/2,T[1]-D/2],Y=[M(C,L),M(C,x)],b=[Math.max(E[0]-Y[0],0),Math.max(E[1]-Y[1],0)]):(E=(T=M(b,S)/2)-D/2,Y=M(C,S),b=Math.max(E-Y,0)),F)&&(N().style.lineWidth=D,r.add(N()));var O=W?0:z-b,U=W?0:A-b,_=null;r.add(function(){var t=G(b);t.setStyle(e.getModel("backgroundStyle").getItemStyle()),t.style.fill=null,t.z2=5;var a=G(b);a.setStyle(e.getModel("backgroundStyle").getItemStyle()),a.style.stroke=null;var i=new p;return i.add(t),i.add(a),i}());var k=this._data,q=[];function G(e,t){if(B){if(I(B)){var a=d(B.slice(7),{}),i=a.getBoundingRect(),r=i.width,n=i.height;r>n?(n*=2*e/r,r=2*e):(r*=2*e/n,n=2*e);var l=t?0:z-r/2,s=t?0:A-n/2;return a=d(B.slice(7),{},new m(l,s,r,n)),t&&(a.x=-r/2,a.y=-n/2),a}if(W){var o=t?-e[0]:z-e[0],h=t?-e[1]:A-e[1];return u("rect",o,h,2*e[0],2*e[1])}h=t?-e:A-e;return"pin"===B?h+=e:"arrow"===B&&(h-=e),u(B,o=t?-e:z-e,h,2*e,2*e)}return new y({shape:{cx:t?0:z,cy:t?0:A,r:e}})}function N(){var t=G(T);return t.style.fill=null,t.setStyle(e.getModel("outline.itemStyle").getItemStyle()),t}function j(t,a,i){var r=W?b[0]:b,l=W?x/2:b,s=n.getItemModel(t),h=s.getModel("itemStyle"),d=s.get("phase"),u=M(s.get("amplitude"),2*l),p=M(s.get("waveLength"),2*r),g=l-n.get("value",t)*l*2;d=i?i.shape.phase:"auto"===d?t*Math.PI/4:d;var v=h.getItemStyle();if(!v.fill){var c=e.get("color"),m=t%c.length;v.fill=c[m]}var y=new f({shape:{waveLength:p,radius:r,radiusY:l,cx:2*r,cy:0,waterLevel:g,amplitude:u,phase:d,inverse:a},style:v,x:z,y:A});y.shape._waterLevel=g;var w=s.getModel("emphasis.itemStyle").getItemStyle();w.lineWidth=0,y.ensureState("emphasis").style=w,o(y);var I=G(b,!0);return I.setStyle({fill:"white"}),y.setClipPath(I),y}function V(e,t,a){var i=n.getItemModel(e),r=i.get("period"),l=i.get("direction"),s=n.get("value",e),o=i.get("phase");o=a?a.shape.phase:"auto"===o?e*Math.PI/4:o;var h=0;h="auto"===r?function(t){var a=n.count();return 0===a?t:t*(.2+(a-e)/a*.8)}(5e3):"function"==typeof r?r(s,e):r;var d=0;"right"===l||null==l?d=Math.PI:"left"===l?d=-Math.PI:"none"===l?d=0:console.error("Illegal direction value for liquid fill."),"none"!==l&&i.get("waveAnimation")&&t.animate("shape",!0).when(0,{phase:o}).when(h/2,{phase:d+o}).when(h,{phase:2*d+o}).during(function(){_&&_.dirty(!0)}).start()}n.diff(k).add(function(t){var a=j(t,!1),i=a.shape.waterLevel;a.shape.waterLevel=W?x/2:b,l(a,{shape:{waterLevel:i}},e),a.z2=2,V(t,a,null),r.add(a),n.setItemGraphicEl(t,a),q.push(a)}).update(function(t,a){for(var l=k.getItemGraphicEl(a),o=j(t,!1,l),h={},d=["amplitude","cx","cy","phase","radius","radiusY","waterLevel","waveLength"],u=0;u<d.length;++u){var p=d[u];o.shape.hasOwnProperty(p)&&(h[p]=o.shape[p])}var g={},v=["fill","opacity","shadowBlur","shadowColor"];for(u=0;u<v.length;++u){p=v[u];o.style.hasOwnProperty(p)&&(g[p]=o.style[p])}W&&(h.radiusY=x/2),s(l,{shape:h,x:o.x,y:o.y},e),e.isUniversalTransitionEnabled&&e.isUniversalTransitionEnabled()?s(l,{style:g},e):l.useStyle(g);var c=l.getClipPath(),m=o.getClipPath();l.setClipPath(o.getClipPath()),l.shape.inverse=o.inverse,c&&m&&i._shape===B&&!I(B)&&s(m,{shape:c.shape},e,{isFrom:!0}),V(t,l,l),r.add(l),n.setItemGraphicEl(t,l),q.push(l)}).remove(function(e){var t=k.getItemGraphicEl(e);r.remove(t)}).execute(),w.get("label.show")&&r.add(function(t){var a=w.getModel("label");function i(){var t=e.getFormattedLabel(0,"normal"),a=100*n.get("value",0),i=n.getName(0)||e.name;return isNaN(a)||(i=a.toFixed(0)+"%"),null==t?i:t}var r={z2:10,shape:{x:O,y:U,width:2*(W?b[0]:b),height:2*(W?b[1]:b)},style:{fill:"transparent"},textConfig:{position:a.get("position")||"inside"},silent:!0},l={style:{text:i(),textAlign:a.get("align"),textVerticalAlign:a.get("baseline")}};Object.assign(l.style,h(a));var s=new g(r),o=new g(r);o.disableLabelAnimation=!0,s.disableLabelAnimation=!0;var d=new v(l),u=new v(l);s.setTextContent(d),o.setTextContent(u);var m=a.get("insideColor");u.style.fill=m;var y=new p;y.add(s),y.add(o);var f=G(b,!0);return _=new c({shape:{paths:t},x:z,y:A}),_.setClipPath(f),o.setClipPath(_),y}(q)),this._shape=B,this._data=n},dispose:function(){}});
