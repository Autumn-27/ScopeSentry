import{dL as o}from"./three.BbguFgn81764683399638.js";import{g as s}from"./gsap.CY1N3EIL1764683399638.js";import"./index.DM693cYN1764683399638.js";import{u as t}from"./useSeek.D1f6FARu1764683399638.js";import{P as e,S as i}from"./@tresjs.CJvYCGUA1764683399638.js";import{d as r,t as a,r as n,c as l,w as p,G as c,o as u,F as m,h,I as f,u as d,f as y,W as j,e as g,b as v,a9 as w,aa as T}from"./@vue.DjQnunkc1764683399638.js";import{_ as x}from"./@fesjs.CQdxRiFD1764683399638.js";import"./chalk.BHLFMujs1764683399638.js";/* empty css                                 */import"./iconify-icon.Dg3Wmqac1764683399638.js";import"./@iconify.Db0UMRdG1764683399638.js";import"./pinia.yp40krTn1764683399638.js";import"./vite-plugin-qiankun.B06WoCqG1764683399638.js";import"./vue-router.CW9J5iK31764683399638.js";import"./dompurify.C4MEnGDh1764683399638.js";import"./color.D_UQSrzA1764683399638.js";import"./color-string.cWrXb_cU1764683399638.js";import"./color-name.gyPnsvCn1764683399638.js";import"./lodash.OvYRBTRe1764683399638.js";import"./@amap.fjyZdsU91764683399638.js";import"./object-hash.C0HZ2EUZ1764683399638.js";import"./jszip.CqykFGTv1764683399638.js";import"./oimophysics.CfVKSiAm1764683399638.js";import"./three-stdlib.CqpxBIJB1764683399638.js";import"./@pmndrs.CRF-_adI1764683399638.js";import"./axios.Bl1IyXmH1764683399638.js";import"./postprocessing.DjqPXL_K1764683399638.js";import"./@vueuse.BBrxj3Xz1764683399638.js";import"./lodash-es.DWe8oqPO1764683399638.js";import"./@qlin.y-0Z8WnK1764683399638.js";import"./@babel.BPq7uOAK1764683399638.js";import"./@floating-ui.Bhq4ibgf1764683399638.js";import"./@juggle.Vc7cP4_P1764683399638.js";const z=["position"],_=["position"],M=r({__name:"repulsionEffectSence",setup(r){const v=a(null),w=a(null),T=n({rows:6,cols:14,gutter:2.2}),x=l(()=>({x:(T.cols-1)*T.gutter/2,z:(T.rows-1)*T.gutter/2})),{seekAll:M}=t();p(w,()=>{v.value=M(w.value,"type","Mesh"),v.value.forEach(s=>{s.initialRotation={x:"torus"===s.name?o(90):s.rotation.x,y:s.rotation.y,z:"cone"===s.name||"cylinder"===s.name?o(-180):s.rotation.z},s.rotation.x=s.initialRotation.x,s.rotation.y=s.initialRotation.y,s.rotation.z=s.initialRotation.z})});const k=({point:t})=>{if(!v.value)return;const{x:e,y:i,z:r}=t;v.value.forEach(t=>{const i=P(e,r,t.position.x,t.position.z),a=b(i,7,0,0,6);s.to(t.position,{y:a<1?1:a,duration:.3});const n=t.position.y/1.2,l=n<1?1:n;s.to(t.scale,{ease:"expo.out",x:l,y:l,z:l,duration:.3}),s.to(t.rotation,{duration:.7,ease:"expo.out",x:b(t.position.y,-1,1,o(270),t.initialRotation.x),z:b(t.position.y,-1,1,o(-90),t.initialRotation.z),y:b(t.position.y,-1,1,o(45),t.initialRotation.y)})})},P=(o,s,t,e)=>Math.sqrt((o-t)**2+(s-e)**2),b=(o,s,t,e,i)=>(o-s)/(t-s)*(i-e)+e,L=(o,s)=>{const t=Math.floor(3*Math.random());return 0===t?"torus":1===t?"cone":"cylinder"},R=(o,s)=>[(o-1)*T.gutter-x.value.x,0,(s-1)*T.gutter-x.value.z];return(o,s)=>(u(),c(m,null,[h(d(e),{"receive-shadow":"",args:[100,100],"rotation-x":-Math.PI/2,position:[0,0,0],onPointermove:k},{default:y(()=>[...s[0]||(s[0]=[f("TresShadowMaterial",{transparent:"",opacity:.3},null,-1)])]),_:1},8,["rotation-x"]),f("TresGroup",{ref_key:"shapesGroupRef",ref:w,name:"shapes"},[(u(!0),c(m,null,j(T.rows,o=>(u(),c("TresGroup",{key:`row-${o}`},[(u(!0),c(m,null,j(T.cols,t=>(u(),c("TresGroup",{key:`col-${t}-${o}`},["torus"===L()?(u(),c("TresMesh",{key:0,name:"torus","cast-shadow":"","receive-shadow":"",position:R(t,o)},[...s[1]||(s[1]=[f("TresTorusGeometry",{args:[.25,.08,30,200]},null,-1),f("TresMeshPhysicalMaterial",{color:"#3e2917",metalness:.58,emissive:"#000000",roughness:.05},null,-1)])],8,z)):"cone"===L()?(u(),g(d(i),{key:1,name:"cone",args:[.3,.5,32],"cast-shadow":"","receive-shadow":"",position:R(t,o)},{default:y(()=>[...s[2]||(s[2]=[f("TresMeshPhysicalMaterial",{color:"#3e2917",metalness:.58,emissive:"#000000",roughness:.05},null,-1)])]),_:1},8,["position"])):(u(),c("TresMesh",{key:2,name:"cylinder","cast-shadow":"","receive-shadow":"",position:R(t,o)},[...s[3]||(s[3]=[f("TresCylinderGeometry",{args:[.3,.3,.2,64]},null,-1),f("TresMeshPhysicalMaterial",{color:"#3e2917",metalness:.58,emissive:"#000000",roughness:.05},null,-1)])],8,_))]))),128))]))),128))],512)],64))}}),k=x(r({__name:"repulsionEffect",setup(o){const s={alpha:!0,shadows:!0,powerPreference:"high-performance",windowSize:!0,clearAlpha:0};return(o,t)=>{const e=v("TresCanvas");return u(),c(m,null,[t[8]||(t[8]=f("div",{class:"repulsion-effect__content"},[f("h2",null,"ICE.GL"),f("h3",null,"图形学社区")],-1)),t[9]||(t[9]=f("div",{class:"repulsion-effect__bg"},null,-1)),h(e,w(T(s)),{default:y(()=>[t[0]||(t[0]=f("TresPerspectiveCamera",{position:[0,65,0],"rotation-x":-1.57,fov:20},null,-1)),t[1]||(t[1]=f("TresAmbientLight",{color:"#ffffff"},null,-1)),t[2]||(t[2]=f("TresPointLight",{color:"#fff000",intensity:5,decay:0,position:[0,5,-20]},null,-1)),t[3]||(t[3]=f("TresPointLight",{color:"#79573e",intensity:5,decay:0,position:[35,5,0]},null,-1)),t[4]||(t[4]=f("TresPointLight",{color:"#c27439",intensity:5,decay:0,position:[-35,5,0]},null,-1)),t[5]||(t[5]=f("TresPointLight",{color:"#fff000",intensity:5,decay:0,position:[0,5,20]},null,-1)),t[6]||(t[6]=f("TresSpotLight",{color:"#7bccd7",decay:0,"cast-shadow":"","shadow-mapSize-width":2048,"shadow-mapSize-height":2048,position:[0,25,0]},null,-1)),t[7]||(t[7]=f("TresRectAreaLight",{color:"#341212",decay:0,width:1e3,height:1e3,position:[5,20,50],"look-at":[0,0,0]},null,-1)),h(M)]),_:1},16)],64)}}}),[["__scopeId","data-v-3a889124"]]);export{k as default};
