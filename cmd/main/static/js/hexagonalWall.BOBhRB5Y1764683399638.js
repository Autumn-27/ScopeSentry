import{P as e}from"./tweakpane.CqZAnw7f1764683399638.js";import{F as a,r as o,N as s,_ as t,K as r}from"./@tresjs.CJvYCGUA1764683399638.js";import"./index.DM693cYN1764683399638.js";import{_ as i}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.u89pth7i1764683399638.js";import{o as n,V as l,aE as m,k as p,cT as c,cR as d,cS as u,d as h,dq as j,dr as f}from"./three.BbguFgn81764683399638.js";import{g}from"./gsap.CY1N3EIL1764683399638.js";import{d as v,w,G as y,H as _,u as M,o as x,r as P,b,e as z,f as I,I as k,h as B,a9 as T,aa as q}from"./@vue.DjQnunkc1764683399638.js";import"./postprocessing.DjqPXL_K1764683399638.js";import"./@vueuse.BBrxj3Xz1764683399638.js";import"./@fesjs.CQdxRiFD1764683399638.js";import"./vue-router.CW9J5iK31764683399638.js";import"./lodash-es.DWe8oqPO1764683399638.js";import"./pinia.yp40krTn1764683399638.js";import"./@qlin.y-0Z8WnK1764683399638.js";import"./@babel.BPq7uOAK1764683399638.js";import"./@floating-ui.Bhq4ibgf1764683399638.js";import"./@juggle.Vc7cP4_P1764683399638.js";import"./chalk.BHLFMujs1764683399638.js";/* empty css                                 */import"./iconify-icon.Dg3Wmqac1764683399638.js";import"./@iconify.Db0UMRdG1764683399638.js";import"./vite-plugin-qiankun.B06WoCqG1764683399638.js";import"./dompurify.C4MEnGDh1764683399638.js";import"./color.D_UQSrzA1764683399638.js";import"./color-string.cWrXb_cU1764683399638.js";import"./color-name.gyPnsvCn1764683399638.js";import"./lodash.OvYRBTRe1764683399638.js";import"./@amap.fjyZdsU91764683399638.js";import"./object-hash.C0HZ2EUZ1764683399638.js";import"./jszip.CqykFGTv1764683399638.js";import"./oimophysics.CfVKSiAm1764683399638.js";import"./three-stdlib.CqpxBIJB1764683399638.js";import"./@pmndrs.CRF-_adI1764683399638.js";import"./axios.Bl1IyXmH1764683399638.js";import"./dither.glsl.tNAdkJUa1764683399638.js";import"./Reflector.DiEbG3XV1764683399638.js";const D=["object"],S=v({__name:"hexagonalWall",props:{color:{default:"#7432B4"}},setup(e){const{renderer:r,scene:i,camera:v,sizes:P}=a(),b=e;let z=null;const{textures:I,isLoading:k}=o(["./plugins/floor/image/concrete_wet_floor_basecolor.jpg","./plugins/floor/image/metal_plate_diff_1k.jpg"]),{state:B}=s("https://opensource.cdn.icegl.cn/model/floor/baseModelI.glb",{draco:!0,decoderPath:"./draco/"});let T=null;w([B,I,k],([e,a,o])=>{e&&a&&!o&&(T=e.scene,T.traverse(e=>{if(e instanceof n){const o=e.position.clone(),s=20+30*Math.random(),t=Math.random()*Math.PI*2,r=20*(Math.random()-.5),i=new l(o.x+Math.cos(t)*s,o.y+r,o.z+Math.sin(t)*s);q.push({mesh:e,originalPosition:o,scatteredPosition:i}),e.position.copy(i),e.name.includes("_")?(a[0].wrapS=m,a[0].wrapT=m,a[0].repeat.set(10,10),e.material.map=I.map,e.material.needsUpdate=!0,e.material.emissive=new p("#7432B4"),e.material.emissiveIntensity=3.5):(a[1]&&(a[1].wrapS=m,a[1].wrapT=m,a[1].repeat.set(10,10),e.material.map=a[1]),e.material.color=new p("#7432B4"),e.material.metalness=.8,e.material.roughness=.2,e.material.envMapIntensity=2.5,e.material.needsUpdate=!0)}}),E(),C(),S())});const q=[],S=()=>{if(0===q.length)return;const e=g.timeline();q.forEach((a,o)=>{const s=.8*Math.random(),t={x:(Math.random()-.5)*Math.PI*2,y:(Math.random()-.5)*Math.PI*2,z:(Math.random()-.5)*Math.PI*2};a.mesh.rotation.set(t.x,t.y,t.z),e.to(a.mesh.position,{x:a.originalPosition.x,y:a.originalPosition.y,z:a.originalPosition.z,duration:3,ease:"power2.out",delay:s},0),e.to(a.mesh.rotation,{x:0,y:0,z:0,duration:3,ease:"power2.out",delay:s},0)}),e.call(()=>{U()}),console.log(`开始拼合动画，共 ${q.length} 个mesh`)},U=()=>{q.forEach((e,a)=>{g.to(e.mesh.position,{z:e.originalPosition.z+3+a/50,duration:2,repeat:-1,yoyo:!0,ease:"power1.inOut"})}),console.log("Z轴微动动画已启动")},C=()=>{if(!r||!v.value||!P.width.value)return;z=new c(r);const e=new d(i.value,v.value);z.addPass(e);const a=new u(new h(P.width.value,P.height.value),.6,.05,.25);z.addPass(a)},E=()=>{const e=new j(r),a=new f,o=e.fromScene(a).texture;i.value.environment=o,T.traverse(e=>{e instanceof n&&e.material&&(e.material.envMap=o,e.material.needsUpdate=!0)}),a.dispose()},{onRender:G}=t();return G(()=>{z&&z.render()}),w(()=>[b.color],([e])=>{T.traverse(a=>{a instanceof n&&a.material&&(a.material.color=new p(e),a.material.emissive=new p(e))})}),(e,a)=>M(B)?(x(),y("primitive",{key:0,object:M(B)?.scene,"position-y":.01},null,8,D)):_("",!0)}}),U=v({__name:"hexagonalWall",setup(a){const o=P({color:"#7432B4"}),s=new e({expanded:!0}),t={reflectivity:1,showGridHelper:!1,scale:2,renderMode:"manual"};return s.addBinding(o,"color",{label:"颜色"}),(e,a)=>{const s=b("TresCanvas");return x(),z(s,{clearColor:"#000000","window-size":""},{default:I(()=>[a[0]||(a[0]=k("TresPerspectiveCamera",{position:[2,2,0],fov:45,near:.1,far:1e4},null,-1)),B(M(r),{enableDamping:""}),B(M(S),T(q(o)),null,16),B(i,T(q(t)),null,16)]),_:1})}}});export{U as default};
