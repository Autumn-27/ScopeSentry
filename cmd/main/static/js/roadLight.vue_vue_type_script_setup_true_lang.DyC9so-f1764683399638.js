import{_ as e,s as a}from"./@tresjs.CJvYCGUA1764683399638.js";import{V as s,bz as r,bj as o,k as t,aE as l}from"./three.BbguFgn81764683399638.js";import{l as n}from"./utils.e6kO7tRf1764683399638.js";import{d as f,a as u,ad as p,a3 as d,G as i,o as m,h as c,f as g,F as h,W as _,I as v,u as j}from"./@vue.DjQnunkc1764683399638.js";const w={renderOrder:3e3},y=["args"],T=["map","side","color"],b=f({__name:"roadLight",props:{geoJson:{},color:{default:"#ffff00"},radius:{default:2},speed:{default:1}},async setup(f){let b,M;const k=f,G=u(),R=u(),x=([b,M]=p(()=>n(k.geoJson)),b=await b,M(),b),B=[-31.258949,0,-121.465782];let E=[];for(var J=0;J<x.length;J++){const e=x[J],a=[];e.geometry.coordinates.forEach(e=>{a.push(new s(6e4*(e[1]+B[0]),B[1],6e4*(e[0]+B[2])))}),E.push(new r(a))}d(()=>{k.color&&R.value&&(R.value.color=new t(k.color))});const{onBeforeRender:L}=e(),z=u();L(()=>{z.value&&(z.value.offset.x-=Math.random()/20*k.speed)});const C=e=>{e.wrapS=e.wrapT=l,e.repeat.set(1,1),z.value=e};return(e,s)=>(m(),i("TresGroup",{ref_key:"tgRef",ref:G},[c(j(a),{path:"./plugins/digitalCity/image/line.png",onLoaded:C},{default:g(({state:e})=>[(m(!0),i(h,null,_(j(E),a=>(m(),i("TresMesh",w,[v("TresTubeGeometry",{args:[a,64,k.radius,20,!1]},null,8,y),v("TresMeshBasicMaterial",{ref_for:!0,ref_key:"tmbmRef",ref:R,map:e,side:j(o),transparent:!0,color:k.color},null,8,T)]))),256))]),_:1})],512))}});export{b as _};
