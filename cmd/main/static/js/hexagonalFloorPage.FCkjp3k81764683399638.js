import{P as e}from"./tweakpane.CqZAnw7f1764683399638.js";import{F as o,n as s,N as a,K as t}from"./@tresjs.CJvYCGUA1764683399638.js";import"./index.DM693cYN1764683399638.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.u89pth7i1764683399638.js";import{aE as i,o as n,V as l,E as p,dq as m,dr as d}from"./three.BbguFgn81764683399638.js";import{g as c}from"./gsap.CY1N3EIL1764683399638.js";import{d as f,w as u,G as j,o as g,H as h,u as v,r as y,b,e as x,f as _,I as M,h as w,ah as C,m as I}from"./@vue.DjQnunkc1764683399638.js";import"./postprocessing.DjqPXL_K1764683399638.js";import"./@vueuse.BBrxj3Xz1764683399638.js";import"./@fesjs.CQdxRiFD1764683399638.js";import"./vue-router.CW9J5iK31764683399638.js";import"./lodash-es.DWe8oqPO1764683399638.js";import"./pinia.yp40krTn1764683399638.js";import"./@qlin.y-0Z8WnK1764683399638.js";import"./@babel.BPq7uOAK1764683399638.js";import"./@floating-ui.Bhq4ibgf1764683399638.js";import"./@juggle.Vc7cP4_P1764683399638.js";import"./chalk.BHLFMujs1764683399638.js";/* empty css                                 */import"./iconify-icon.Dg3Wmqac1764683399638.js";import"./@iconify.Db0UMRdG1764683399638.js";import"./vite-plugin-qiankun.B06WoCqG1764683399638.js";import"./dompurify.C4MEnGDh1764683399638.js";import"./color.D_UQSrzA1764683399638.js";import"./color-string.cWrXb_cU1764683399638.js";import"./color-name.gyPnsvCn1764683399638.js";import"./lodash.OvYRBTRe1764683399638.js";import"./@amap.fjyZdsU91764683399638.js";import"./object-hash.C0HZ2EUZ1764683399638.js";import"./jszip.CqykFGTv1764683399638.js";import"./oimophysics.CfVKSiAm1764683399638.js";import"./three-stdlib.CqpxBIJB1764683399638.js";import"./@pmndrs.CRF-_adI1764683399638.js";import"./axios.Bl1IyXmH1764683399638.js";import"./dither.glsl.tNAdkJUa1764683399638.js";import"./Reflector.DiEbG3XV1764683399638.js";const z=["object"],R=f({__name:"hexagonalFloor",props:{floorColor:{default:"#ff0000"},floorMetalness:{default:.8},floorRoughness:{default:.2},floorEnvMapIntensity:{default:2.5},sideColor:{default:"#ffffff"},sideOpacity:{default:.9},speed:{default:.3}},setup(e){const{renderer:t,scene:r}=o(),f=e,{state:y}=s("./plugins/floor/image/concrete_wet_floor_basecolor.jpg");u(y,e=>{e&&(e.wrapS=i,e.wrapT=i,e.repeat.set(10,10))});const{state:b}=a("https://opensource.cdn.icegl.cn/model/floor/baseModelI.glb",{draco:!0,decoderPath:"./draco/"}),x=[],_=c.timeline();u(()=>b.value,e=>{if(!e.scene)return;e.scene.traverse(e=>{if(e instanceof n){const o=e.position.clone(),s=e.rotation.clone(),a=Math.random()-.5,t=new l(o.x,o.y+a,o.z),r=Math.PI/12,i=new p(s.x+(Math.random()-.5)*r,s.y+(Math.random()-.5)*r,s.z);x.push({mesh:e,originalPosition:o,scatteredPosition:t,originalRotation:s,scatteredRotation:i}),e.name.includes("_")?(e.material.emissiveIntensity=2,e.material.metalness=1,e.material.roughness=0,e.material.transparent=!0):e.material.map=y.value,e.material.needsUpdate=!0}}),x.forEach(({mesh:e,scatteredPosition:o,scatteredRotation:s},a)=>{_.to(e.position,{x:o.x,y:o.y,z:o.z,ease:"power1.inOut",repeat:-1,yoyo:!0},0),_.to(e.rotation,{x:s.x,y:s.y,z:s.z,ease:"power1.inOut",repeat:-1,yoyo:!0},0)}),M()});const M=()=>{const e=new m(t),o=new d,s=e.fromScene(o).texture;r.value.environment=s,b.value.scene.traverse(e=>{e instanceof n&&e.material&&(e.material.envMap=s,e.material.needsUpdate=!0)}),o.dispose(),w(f.sideColor,f.floorColor,f.sideOpacity,f.floorMetalness,f.floorRoughness,f.floorEnvMapIntensity)},w=(e,o,s,a,t,r)=>{b.value?.scene&&b.value.scene.traverse(i=>{i instanceof n&&i.material&&(i.name.includes("_")?(i.material.emissive.set(e),i.material.opacity=s):(i.material.color.set(o),i.material.metalness=a,i.material.roughness=t,i.material.envMapIntensity=r))})};return u(()=>[f.sideColor,f.floorColor,f.sideOpacity,f.floorMetalness,f.floorRoughness,f.floorEnvMapIntensity],([e,o,s,a,t,r])=>{w(e,o,s,a,t,r)}),u(()=>[f.speed],([e])=>{_.timeScale(e)},{immediate:!0}),(e,o)=>(g(),j("TresGroup",null,[v(b)?(g(),j("primitive",{key:0,object:v(b)?.scene,position:[0,-.1,0]},null,8,z)):h("",!0)]))}}),E=f({__name:"hexagonalFloorPage",setup(o){const s=y({floorColor:"#ff0000",floorMetalness:.8,floorRoughness:.2,floorEnvMapIntensity:2.5,sideColor:"#000000",sideOpacity:.56,speed:.1}),a=new e({expanded:!0});return a.addBinding(s,"floorColor",{label:"地板颜色"}),a.addBinding(s,"floorMetalness",{label:"地板金属度",min:0,max:1}),a.addBinding(s,"floorRoughness",{label:"地板粗糙度",min:0,max:1}),a.addBinding(s,"floorEnvMapIntensity",{label:"地板环境光强度",min:0,max:10}),a.addBinding(s,"sideColor",{label:"侧面颜色"}),a.addBinding(s,"sideOpacity",{label:"侧面透明度",min:0,max:1}),a.addBinding(s,"speed",{label:"动画速度",min:0,max:1,step:.01}),(e,o)=>{const a=b("TresCanvas");return g(),x(a,{clearColor:"#000000","window-size":""},{default:_(()=>[o[0]||(o[0]=M("TresPerspectiveCamera",{position:[6,6,0],fov:45,near:.1,far:1e4},null,-1)),w(v(t),{enableDamping:""}),(g(),x(C,null,{default:_(()=>[w(v(R),I(s,{scale:2,position:[0,.5,0]}),null,16)]),_:1})),w(r,{reflectivity:1,showGridHelper:!1,scale:2})]),_:1})}}});export{E as default};
