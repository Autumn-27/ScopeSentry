import{bj as e,a6 as a}from"./three.BbguFgn81764683399638.js";import{F as s,_ as t}from"./@tresjs.CJvYCGUA1764683399638.js";import"./index.DM693cYN1764683399638.js";import{u as r}from"./index.zjpK5bpU1764683399638.js";import{M as i,a as l}from"./@pmndrs.CRF-_adI1764683399638.js";import{d as u,t as n,q as o,s as v,G as d,o as m,u as f}from"./@vue.DjQnunkc1764683399638.js";const p=["buffer","side"],c=u({__name:"index",props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(u,{expose:c}){const b=n(),{extend:h,scene:k,renderer:M,camera:x}=s(),g=n(),R=u;h({MeshTransmissionMaterial:i});const T=new l,{onBeforeRender:j}=t(),y=r({width:R.fboResolution,height:R.fboResolution,isLoop:!1}),_=r({width:R.fboResolution,height:R.fboResolution,isLoop:!1});let w,I,B,L;return o(async()=>{await v(),g.value=function(e,a){let s;return e.traverse(e=>{e.isMesh&&e.material&&e.material.uuid===a&&(s=e)}),s}(k.value,b.value.uuid)}),j(({elapsed:a})=>{b.value&&(b.value.time=a,b.value.buffer===_.value.texture&&g.value&&(B=M.toneMapping,w=k.value.background,I=b.value.envMapIntensity,L=g.value.material.side,g.value.material=T,R.backside&&(M.setRenderTarget(y.value),M.render(k.value,x.value),g.value.material=b.value,g.value.material.thickness=R.backsideThickness,g.value.material.buffer=y.value.texture,g.value.material.side=e,g.value.material.envMapIntensity=0),M.setRenderTarget(_.value),M.render(k.value,x.value),g.value.material.buffer=_.value.texture,g.value.material=b.value,g.value.material.thickness=R.thickness,g.value.material.side=L,g.value.material.envMapIntensity=I,k.value.background=w,M.setRenderTarget(null),M.toneMapping=B))}),c({root:b,constructor:i}),(e,s)=>(m(),d("TresMeshTransmissionMaterial",{ref_key:"MeshTransmissionMaterialClass",ref:b,buffer:f(_).texture,side:f(a)},null,8,p))}});export{c as _};
