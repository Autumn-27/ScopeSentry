import{F as e,_ as o,K as a}from"./@tresjs.CJvYCGUA1764683399638.js";import{p as s,e as t}from"./three-tile.nLdI1RRs1764683399638.js";import{T as r}from"./@tweenjs.C9YEcV0Y1764683399638.js";import{d as n,a as l,w as i,G as p,o as m,F as u,I as c,h as f,u as v,r as g,b as d,f as j,a9 as y,aa as _,m as h}from"./@vue.DjQnunkc1764683399638.js";import{c as T,a as w,i as b}from"./informationDiv.BjYFzlWi1764683399638.js";import{V as x}from"./three.BbguFgn81764683399638.js";import"./postprocessing.DjqPXL_K1764683399638.js";import"./@vueuse.BBrxj3Xz1764683399638.js";/* empty css                                                                                    */import"./@fesjs.CQdxRiFD1764683399638.js";import"./vue-router.CW9J5iK31764683399638.js";import"./lodash-es.DWe8oqPO1764683399638.js";import"./pinia.yp40krTn1764683399638.js";import"./@qlin.y-0Z8WnK1764683399638.js";import"./@babel.BPq7uOAK1764683399638.js";import"./@floating-ui.Bhq4ibgf1764683399638.js";import"./@juggle.Vc7cP4_P1764683399638.js";const D=n({__name:"flyTo",props:{map:{}},setup(a,{expose:s}){const t=a,{camera:n,controls:l}=e();let i=[];const{onBeforeRender:p}=o();return p(()=>{i&&i[0]?.update()}),s({flyToGeo:(e,o)=>{const a=e=>t.map.localToWorld(t.map.geo2pos(e));((e,o)=>{l.value&&l.value.target.copy(o);const a=n.value.position;i[0]=new r(a).to(e).start()})(a(e),a(o))},goToGeo:(e,o)=>{const a=t.map.localToWorld(t.map.geo2pos(o)),s=t.map.localToWorld(t.map.geo2pos(e));n.value.position.copy(s),l.value.target.copy(a),l.value.dispatchEvent({type:"change"})}}),(e,o)=>null}}),L=["object"],W=n({__name:"mapBoxShow",setup(o){const a=new s({imgSource:[new t({style:"6"}),new t({style:"8"})],lon0:90,minLevel:2,maxLevel:20});a.rotateX(-Math.PI/2);const r=new x(110,30,0),n=new x(110,0,1e7),g=a.localToWorld(a.geo2map(r)),d=a.localToWorld(a.geo2map(n)),j=l(),{camera:y,controls:_,scene:h,renderer:b}=e();y.value&&y.value.position.copy(d),i(()=>_.value,e=>{e&&(e.target.copy(g),T(e,y.value,h.value))}),i(()=>j.value,e=>{e&&e.target.position.copy(g)});const W=l();return i(()=>W.value,e=>{if(e){const o=new x(118.724693,32.00741,9655),a=new x(118.724419,32.010354,0);setTimeout(()=>{e.flyToGeo(o,a)},500)}}),w(y.value,b.domElement,a),(e,o)=>(m(),p(u,null,[c("TresDirectionalLight",{ref_key:"tdLight",ref:j,position:[0,2e3,1e3],intensity:1},null,512),c("primitive",{object:v(a)},null,8,L),f(D,{map:v(a),ref_key:"flyToRef",ref:W},null,8,["map"])],64))}}),k=n({__name:"threeTileEx",setup(e){const o=g({clearColor:"#dbf0ff",alpha:!0,antialias:!1,logarithmicDepthBuffer:!0,precision:"highp"}),s=g({enableDamping:!0,makeDefault:!0,screenSpacePanning:!1,keyPanSpeed:5});return(e,t)=>{const r=d("TresCanvas");return m(),p(u,null,[f(r,h(o,{"window-size":""}),{default:j(()=>[t[0]||(t[0]=c("TresPerspectiveCamera",{position:[0,12,0],fov:70,near:1,far:4e10},null,-1)),f(v(a),y(_(s)),null,16),t[1]||(t[1]=c("TresAmbientLight",{intensity:1},null,-1)),f(W)]),_:1},16),f(b)],64)}}});export{k as default};
