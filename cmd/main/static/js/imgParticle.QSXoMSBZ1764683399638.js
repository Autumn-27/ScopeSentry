import{K as t}from"./@tresjs.CJvYCGUA1764683399638.js";import"./index.DM693cYN1764683399638.js";import{_ as o}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.u89pth7i1764683399638.js";import{P as s}from"./tweakpane.CqZAnw7f1764683399638.js";import{u as e}from"./utils.Dayf5snU1764683399638.js";import{d as i,ad as r,w as a,G as n,o as l,I as m,u,a9 as p,aa as c,r as d,b as f,e as j,f as v,h as C,ah as g,m as h}from"./@vue.DjQnunkc1764683399638.js";import{k as P,bJ as w}from"./three.BbguFgn81764683399638.js";import"./postprocessing.DjqPXL_K1764683399638.js";import"./@vueuse.BBrxj3Xz1764683399638.js";import"./@fesjs.CQdxRiFD1764683399638.js";import"./vue-router.CW9J5iK31764683399638.js";import"./lodash-es.DWe8oqPO1764683399638.js";import"./pinia.yp40krTn1764683399638.js";import"./@qlin.y-0Z8WnK1764683399638.js";import"./@babel.BPq7uOAK1764683399638.js";import"./@floating-ui.Bhq4ibgf1764683399638.js";import"./@juggle.Vc7cP4_P1764683399638.js";import"./chalk.BHLFMujs1764683399638.js";/* empty css                                 */import"./iconify-icon.Dg3Wmqac1764683399638.js";import"./@iconify.Db0UMRdG1764683399638.js";import"./vite-plugin-qiankun.B06WoCqG1764683399638.js";import"./dompurify.C4MEnGDh1764683399638.js";import"./color.D_UQSrzA1764683399638.js";import"./color-string.cWrXb_cU1764683399638.js";import"./color-name.gyPnsvCn1764683399638.js";import"./lodash.OvYRBTRe1764683399638.js";import"./@amap.fjyZdsU91764683399638.js";import"./object-hash.C0HZ2EUZ1764683399638.js";import"./jszip.CqykFGTv1764683399638.js";import"./oimophysics.CfVKSiAm1764683399638.js";import"./three-stdlib.CqpxBIJB1764683399638.js";import"./@pmndrs.CRF-_adI1764683399638.js";import"./axios.Bl1IyXmH1764683399638.js";import"./dither.glsl.tNAdkJUa1764683399638.js";import"./Reflector.DiEbG3XV1764683399638.js";const _={position:[-8,10,-2],scale:.02},z=["position","colorlist"],b=i({__name:"imgParticleMesh",props:{zPos:{default:1},useCustomColor:{default:!1},customColor:{default:"#ff0000"}},async setup(t){let o,s;const i=t,d=([o,s]=r(()=>e("./logo.png")),o=await o,s(),o),f=document.createElement("canvas"),j=d.image.width,v=d.image.height;f.width=j,f.height=v;const C=f.getContext("2d");C?.drawImage(d.image,0,0);const g=C?.getImageData(0,0,j,v).data,h=[],b=[];if(g)for(let e=0;e<v;e++)for(let t=0;t<j;t++){const o=4*(e*j+t);if(g[o+3]>0){const s=g[o]/255,i=g[o+1]/255,r=g[o+2]/255,a=100*Math.random();h.push(t,-e,a),b.push(s,i,r)}}const y=new Float32Array(h),x=new Float32Array(b),T={uniforms:{zPos:{value:i.zPos},useCustomColor:{value:i.useCustomColor},customColor:{value:new P(i.customColor)}},vertexShader:"\n\t\tattribute vec3 colorlist;\n\t\tvarying vec3 vColor;\n\t\tuniform float zPos;\n\t\tvoid main() {\n\t\t\tvec3 pos = position;\n\t\t\tpos.z *= zPos;\n\t\t\tvColor = colorlist;\n\t\t\tvec4 modelPosition = modelMatrix * vec4(pos, 1.0);\n\t\t\tvec4 viewPosition = viewMatrix * modelPosition;\n\t\t\tgl_PointSize = 0.001 * (1.0 - viewPosition.z);\n\t\t\tgl_Position = projectionMatrix * viewPosition;\n\t\t}",fragmentShader:"\n\t\t\tvarying vec3 vColor;\n\t\t\tuniform bool useCustomColor;\n\t\t\tuniform vec3 customColor;\n\t\t\tvoid main() {\n\t\t\tif(useCustomColor){\n\t\t\t\tgl_FragColor = vec4(customColor, 1.0);\n\t\t\t}else{\n\t\t\t\tgl_FragColor = vec4(vColor, 1.0);\n\t\t\t}\n\t\t}",transparent:!0,depthTest:!1,blending:w};return a(()=>[i.zPos,i.useCustomColor,i.customColor],([t,o,s])=>{T.uniforms.zPos.value=t,T.uniforms.useCustomColor.value=o,T.uniforms.customColor.value.set(s)}),(t,o)=>(l(),n("TresPoints",_,[m("TresBufferGeometry",{position:[u(y),3],colorlist:[u(x),3]},null,8,z),m("TresShaderMaterial",p(c(T)),null,16)]))}}),y=i({__name:"imgParticle",setup(e){const i={clearColor:"#050505",antialias:!1},r={reflectivity:.8,showGridHelper:!1,scale:6},a=d({zPos:1,useCustomColor:!1,customColor:"#ff0000"}),n=new s({title:"参数"});return n.addBinding(a,"zPos",{label:"厚度",min:.5,max:10,step:.5}),n.addBinding(a,"useCustomColor",{label:"使用自定义颜色"}),n.addBinding(a,"customColor",{label:"自定义颜色"}),(s,e)=>{const n=f("TresCanvas");return l(),j(n,h(i,{"window-size":""}),{default:v(()=>[e[0]||(e[0]=m("TresPerspectiveCamera",{position:[0,3,38],fov:45,near:.1,far:1e3},null,-1)),C(u(t)),e[1]||(e[1]=m("TresAmbientLight",{intensity:.5},null,-1)),(l(),j(g,null,{default:v(()=>[C(b,p(c(a)),null,16)]),_:1})),C(u(o),h({position:[0,-6,0]},r),null,16)]),_:1},16)}}});export{y as default};
