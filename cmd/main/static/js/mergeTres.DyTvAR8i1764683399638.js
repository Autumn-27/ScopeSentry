import{A as a}from"./@amap.fjyZdsU91764683399638.js";import{t as e,d as t,q as o,G as n,o as r,a3 as l}from"./@vue.DjQnunkc1764683399638.js";import{_ as s}from"./@fesjs.CQdxRiFD1764683399638.js";import{F as p}from"./@tresjs.CJvYCGUA1764683399638.js";import{d as m}from"./pinia.yp40krTn1764683399638.js";const c=m("mapStore",()=>({aMap:e(null),mapHandle:e(null),cameraState:e(null)})),u={id:"mapContainer"},d=s(t({__name:"mapContainer",props:{center:{default:[0,0]},zoom:{default:14},pitch:{default:50},mapStyle:{default:"normal"}},setup(e){const t=e,l=c();let s=null;return o(async()=>{await a.load({key:"0c7222955570f1b434c4adfcc1e955e8",version:"2.0"}).then(a=>{s=new a.Map("mapContainer",{center:t.center,zooms:[1,20],viewMode:"3D",zoom:t.zoom,pitch:t.pitch,mapStyle:"amap://styles/"+t.mapStyle}),s.on("click",a=>{const e=`您在 [ ${a.lnglat.getLng()},${a.lnglat.getLat()} ] 的位置单击了地图！`;console.log(e)}),l.$patch({aMap:a}),l.$patch({mapHandle:s})}).catch(a=>{console.log(a)})}),(a,e)=>(r(),n("div",u))}}),[["__scopeId","data-v-0970d852"]]),i={__name:"mergeTres",props:{center:{default:[0,0]}},setup(a){const e=a,{camera:t,scene:o,renderer:n}=p(),r=c();let s=null,m=null;return l(()=>{r.aMap&&(s=r.mapHandle.customCoords,m=new r.aMap.CustomLayer(n.domElement,{zIndex:10,render:()=>{n.resetState(),s.setCenter(e.center);const{near:a,far:l,fov:p,up:m,lookAt:c,position:u}=s.getCameraParams();t.value.near=a,t.value.far=l,t.value.fov=p,r.$patch({cameraState:{near:a,far:l,fov:p,position:u}}),t.value.position.set(...u),t.value.up.set(...m),t.value.lookAt(...c),t.value.updateProjectionMatrix(),n.render(o.value,t.value),n.resetState()},alwaysRender:!0}),r.mapHandle.add(m))}),(a,e)=>null}};export{i as _,d as m,c as u};
