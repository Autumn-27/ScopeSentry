import{F as e,_ as t,K as r}from"./@tresjs.CJvYCGUA1764683399638.js";import{cR as s,cT as a,cS as n,d as l,dj as u,dk as o,q as i,dh as v,dl as d}from"./three.BbguFgn81764683399638.js";import{d as m,a as c,a3 as T,G as f,o as x,I as p,F as h,b as g,e as w,f as y,h as M,u as _}from"./@vue.DjQnunkc1764683399638.js";import"./postprocessing.DjqPXL_K1764683399638.js";import"./@vueuse.BBrxj3Xz1764683399638.js";const P=m({__name:"ecLayerMultiple",setup(r){const m=c(),g=c(),w=c(),y=c();T(()=>{m.value&&m.value.layers.set(0),g.value&&g.value.layers.set(1),w.value&&w.value.layers.set(2),y.value&&y.value.layers.set(3)});const{camera:M,renderer:_,scene:P,sizes:D}=e(),S=.572,b=.51,j=0;let B=null,U=null;let k=null;let G=null;let C=null;T(()=>{D.width.value&&(((e,t,r,u,o)=>{B=new s(e,t),U=new a(r),U.renderToScreen=!1,U.addPass(B);const i=new n(new l(u,o),S,b,j);U.addPass(i)})(P.value,M.value,_,D.width.value,D.height.value),(e=>{G=new a(e),G.renderToScreen=!1,G.addPass(B);const t=new o;G.addPass(t)})(_),(e=>{k=new a(e),k.renderToScreen=!1,k.addPass(B);const t=new u;k.addPass(t)})(_),(e=>{C=new a(e),C.addPass(B);const t=new i({uniforms:{baseTexture:{value:null},bloomTexture:{value:U.renderTarget2.texture},filmTexture:{value:k.renderTarget2.texture},glitchTexture:{value:G.renderTarget2.texture}},vertexShader:"\n            varying vec2 vUv;\n            void main() {\n                vUv = uv;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n            }\n        ",fragmentShader:"\n            uniform sampler2D baseTexture;\n            uniform sampler2D bloomTexture;\n\t\t\t\t\t\tuniform sampler2D filmTexture;\n\t\t\t\t\t\tuniform sampler2D glitchTexture;\n            varying vec2 vUv;\n            void main() {\n                gl_FragColor = ( \n\t\t\t\t\t\t\t\t\tvec4( 1.0 ) * texture2D( baseTexture, vUv )  + \n\t\t\t\t\t\t\t\t\tvec4( 1.0 ) * texture2D( bloomTexture, vUv ) + \n\t\t\t\t\t\t\t\t\tvec4( 1.0 ) * texture2D( filmTexture, vUv ) + \n\t\t\t\t\t\t\t\t\tvec4( 1.0 ) * texture2D( glitchTexture, vUv ) \n\t\t\t\t\t\t\t\t);\n            }\n        ",defines:{}}),r=new v(t,"baseTexture");r.needsSwap=!0,C.addPass(r);const{width:s,height:n}=e.getDrawingBufferSize(new l),u=new v(d);u.uniforms.resolution.value.set(1/s,1/n),C.addPass(u)})(_))});const{onRender:N}=t();return N(()=>{U&&C&&M.value&&(_.clear(),M.value.layers.set(1),U.render(),M.value.layers.set(2),k.render(),M.value.layers.set(3),G.render(),_.clearDepth(),M.value.layers.set(0),C.render(P.value,M.value))}),(e,t)=>(x(),f(h,null,[p("TresMesh",{ref_key:"normalBox",ref:m,position:[3,2,1]},[...t[0]||(t[0]=[p("TresBoxGeometry",{args:[1,1,1]},null,-1),p("TresMeshNormalMaterial",null,null,-1)])],512),p("TresMesh",{ref_key:"shineBox",ref:g,position:[0,2,-4]},[...t[1]||(t[1]=[p("TresBoxGeometry",{args:[1,1,1]},null,-1),p("TresMeshNormalMaterial",null,null,-1)])],512),p("TresMesh",{ref_key:"filmBox",ref:w,position:[1,2,3]},[...t[2]||(t[2]=[p("TresBoxGeometry",{args:[1,1,1]},null,-1),p("TresMeshNormalMaterial",null,null,-1)])],512),p("TresMesh",{ref_key:"glitchSphere",ref:y,position:[-3,2,0]},[...t[3]||(t[3]=[p("TresSphereGeometry",{args:[.8,32,16]},null,-1),p("TresMeshNormalMaterial",null,null,-1)])],512)],64))}}),D=m({__name:"effectComposerMultiple",setup(e){const t=c();return T(()=>{if(t.value){t.value.context.renderer.instance.autoClear=!1}}),(e,s)=>{const a=g("TresCanvas");return x(),w(a,{renderMode:"manual","window-size":"",ref_key:"tcRef",ref:t},{default:y(()=>[s[0]||(s[0]=p("TresPerspectiveCamera",{position:[10,10,10]},null,-1)),s[1]||(s[1]=p("TresAmbientLight",{intensity:1},null,-1)),M(_(r)),s[2]||(s[2]=p("TresGridHelper",{args:[10,10]},null,-1)),M(P)]),_:1},512)}}});export{D as default};
