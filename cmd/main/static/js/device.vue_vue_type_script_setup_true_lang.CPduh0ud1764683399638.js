import{y as e,cL as r,ap as a,an as t,ao as s,cR as n,cS as o,d as l,cT as i,dh as d,q as u,cU as c,k as m}from"./three.BbguFgn81764683399638.js";import{F as h,_ as v}from"./@tresjs.CJvYCGUA1764683399638.js";import"./index.DM693cYN1764683399638.js";import{u as p}from"./index.DgwPK7tT1764683399638.js";import{d as f,ad as b,a3 as w,G as x,o as g,ae as _,u as P}from"./@vue.DjQnunkc1764683399638.js";let y=new m("#0fb1fb");const T=new e({color:y,transparent:!0,opacity:.3}),j=new s({color:new m(y),depthTest:!0,transparent:!0}),S=0,M=.972,k=.21,U=["object"],C=f({__name:"device",props:{threshold:{default:0},strength:{default:.972},radius:{default:.21}},async setup(s){let f,y;const C=s,{nodes:D}=([f,y]=b(()=>p("https://opensource.cdn.icegl.cn/model/industry4/modelDraco.glb")),f=await f,y(),f),R=(e=>{const s=[];e.traverse(e=>{e.isMesh&&(s.push(e.geometry),e.material=T)});const n=r(s),o=new a(n,6.137*Math.PI),l=new t(o);return j.opacity=1,l.material=j,l})(D.Sketchfab_model),{camera:B,renderer:F,scene:G,sizes:L}=h();let N=null,q=null,z=null;const H=new e({color:"black"});w(()=>{if(B.value){F.setPixelRatio(window.devicePixelRatio),G.value.add(R);const{finalComposer:e,effectComposer:r,bloomPass:a}=((e,r,a,t,s)=>{const m=new n(e,r),h=new o(new l(t,s),M,k,S),v=new i(a);v.renderToScreen=!1,v.addPass(m),v.addPass(h);const p=new d(new u({uniforms:{baseTexture:{value:null},bloomTexture:{value:v.renderTarget2.texture}},vertexShader:"varying vec2 vUv;\r\nvoid main(){\r\n\tvUv=uv;\r\n\tgl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\r\n}",fragmentShader:"uniform sampler2D baseTexture;\r\nuniform sampler2D bloomTexture;\r\nvarying vec2 vUv;\r\nvoid main(){\r\n\tgl_FragColor=(texture2D(baseTexture,vUv)+vec4(1.)*texture2D(bloomTexture,vUv));\r\n}",defines:{}}),"baseTexture");p.needsSwap=!0;const f=new c,b=new i(a);return b.addPass(m),b.addPass(p),b.addPass(f),{finalComposer:b,effectComposer:v,renderScene:m,bloomPass:h}})(G.value,B.value,F,L.width.value,L.height.value);N=e,q=r,z=a,z.threshold=C.threshold,z.strength=C.strength,z.radius=C.radius}C.threshold&&(z.threshold=C.threshold),C.strength&&(z.strength=C.strength),C.radius&&(z.radius=C.radius)});const I={},{onBeforeRender:O}=v();let V=D.Sketchfab_model.getObjectByName("canister_turbine_011_Nickel-Light-PBR_0"),Y=V.material.clone(),A=new e({color:new m("red"),transparent:!0,opacity:1});return O(({elapsed:e})=>{D.hull_turbine&&(D.hull_turbine.rotation.x+=.03,D.blades_turbine_003.rotation.x+=.03),Math.floor(e)%2?V.material=Y:V.material=A},-1),O(({elapsed:e})=>{q&&(G.value.traverse(e=>{var r;((r=e).isMesh||"GridHelper"===r.type||"reflectorShaderMesh"===r.name)&&(I[r.uuid]=r.material,r.material=H)}),q.render(e)),N&&(G.value.traverse(e=>{var r;I[(r=e).uuid]&&(r.material=I[r.uuid],delete I[r.uuid])}),N.render(e))},1),(e,r)=>(g(),x("primitive",{object:_(P(D).Sketchfab_model)},null,8,U))}});export{C as _};
