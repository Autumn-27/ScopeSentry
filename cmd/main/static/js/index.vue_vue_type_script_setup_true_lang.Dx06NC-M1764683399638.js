import{F as e,_ as a}from"./@tresjs.CJvYCGUA1764683399638.js";import{bs as u,b3 as r,bt as l}from"./three.BbguFgn81764683399638.js";import{a as s,w as o,A as t,d as n,G as f,o as v,I as i,u as d,L as p}from"./@vue.DjQnunkc1764683399638.js";const m=["object"],c=n({__name:"index",props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:c}){const b=n,{fbo:g,camera:j,update:x}=function({resolution:a=256,near:n=.1,far:f=1e3,envMap:v,fog:i}={}){const{renderer:d,scene:p}=e(),m=s(null),c=s(a),b=s(n),g=s(f),j=s(null);let x,_;return o(()=>c,e=>{m.value?.dispose(),m.value=new u(e.value),m.value.texture.type=r},{immediate:!0}),o([b,g,m],([e,a,u])=>{u&&(j.value=new l(e,a,u))},{immediate:!0}),t(()=>{m.value?.dispose()}),{fbo:m,camera:j,update:()=>{x=p.value.fog,_=p.value.background,p.value.background=v||_,p.value.fog=i||x,j.value?.update(d,p.value),p.value.fog=x,p.value.background=_}}}({resolution:b.resolution,near:b.near,far:b.far,envMap:b.envMap,fog:b.fog}),{onBeforeRender:_}=a();let k=0;const M=s(null);return _(()=>{M.value&&(b.frames===1/0||k<b.frames)&&(M.value.visible=!1,x(),M.value.visible=!0,k++)}),c({texture:g.value?.texture}),(e,a)=>(v(),f("TresGroup",null,[i("primitive",{object:d(j)},null,8,m),i("TresGroup",{ref_key:"rgRef",ref:M},[p(e.$slots,"default")],512)]))}});export{c as _};
