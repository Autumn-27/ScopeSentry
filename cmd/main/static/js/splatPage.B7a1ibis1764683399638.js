import{ad as e,A as a,d7 as t}from"./three.BbguFgn81764683399638.js";import{F as s,K as l,d as n}from"./@tresjs.CJvYCGUA1764683399638.js";import{e as i,f as o}from"./@pmndrs.CRF-_adI1764683399638.js";import{d as r,ad as p,a as u,w as c,V as d,G as m,o as f,ae as g,r as v,q as y,e as h,f as j,I as w,h as T,u as b,ah as _,m as k}from"./@vue.DjQnunkc1764683399638.js";import{P as M}from"./tweakpane.CqZAnw7f1764683399638.js";import"./postprocessing.DjqPXL_K1764683399638.js";import"./@vueuse.BBrxj3Xz1764683399638.js";const x=["object"],A=r({__name:"splat",props:{url:{type:String,default:"./plugins/gaussianSplatting/model/luigi.splat"}},async setup(e){let a,t;const l=e,{camera:n,renderer:r}=s(),v=new i(r);let y=([a,t]=p(()=>v.loadAsync(l.url)),a=await a,t(),a);const h=u(null);h.value=new o(y,n.value,{alphaTest:.1}),c(()=>l.url,async e=>{e&&(y=await v.loadAsync(e)),j(),h.value=new o(y,n.value,{alphaTest:.1})});const j=()=>{h.value&&(h.value.geometry.dispose(),h.value.material&&h.value.material.dispose())};return d(()=>{j()}),(e,a)=>(f(),m("primitive",{object:g(h.value)},null,8,x))}}),C=r({__name:"splatPage",setup(s){const i=v({clearColor:"#ffffff",alpha:!1,shadowMapType:t,outputColorSpace:a,toneMapping:e}),o=v({url:"./plugins/gaussianSplatting/model/luigi.splat"}),r=new M({title:"参数",expanded:!0}),p=document.createElement("input");p.type="file",p.accept=".splat",p.style.display="none",document.body.appendChild(p);return r.addButton({title:"替换splat文件",label:"500MB以内"}).on("click",()=>{p&&(p.value="",p.click())}),y(()=>{p.onchange=e=>{const a=e.target.files[0];if(!a)return;if(a.size>524288e3)return void alert("文件大小不能超过500MB");const t=URL.createObjectURL(a);o.url=t}}),(e,a)=>(f(),h(b(n),k(i,{"window-size":""}),{default:j(()=>[a[0]||(a[0]=w("TresPerspectiveCamera",{position:[3,3,3],fov:45,near:.1,far:1e3,"look-at":[0,0,0]},null,-1)),T(b(l)),a[1]||(a[1]=w("TresAmbientLight",{intensity:3},null,-1)),(f(),h(_,null,{default:j(()=>[T(A,k(o,{position:[0,.7,0],"rotate-x":-Math.PI}),null,16,["rotate-x"])]),_:1})),a[2]||(a[2]=w("TresDirectionalLight",{position:[6,2,4],intensity:2},null,-1)),a[3]||(a[3]=w("TresGridHelper",null,null,-1))]),_:1},16))}});export{C as default};
