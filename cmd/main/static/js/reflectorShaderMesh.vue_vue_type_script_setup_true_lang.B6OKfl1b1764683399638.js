import{aE as e,d as r,k as o,p as t,o as i,cG as a}from"./three.BbguFgn81764683399638.js";import{F as l,r as s}from"./@tresjs.CJvYCGUA1764683399638.js";import{R as n}from"./ReflectorMaterial.D2w4VKEA1764683399638.js";import{R as f}from"./Reflector.DiEbG3XV1764683399638.js";import{f as m}from"./index.DM693cYN1764683399638.js";import{d as u,w as c,a3 as p,G as d,H as g,u as v,o as w,I as h}from"./@vue.DjQnunkc1764683399638.js";const j={key:0},x=["object"],S=["object"],b=u({__name:"reflectorShaderMesh",props:{reflectivity:{default:.2},mirror:{default:.1},mixStrength:{default:9},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},setup(u){const b=u,{scene:y}=l(),{textures:M,isLoading:_}=s(["./plugins/floor/image/concrete_wet_floor_basecolor.jpg","./plugins/floor/image/concrete_wet_floor_normal.jpg"]);let R=null,G=null,H=null;return c([M,_],([l,s])=>{if(l&&2===l.length&&!s){l[0].wrapS=e,l[0].wrapT=e,l[1].wrapS=e,l[1].wrapT=e;const s=new f;R=new n({reflectivity:b.reflectivity,mirror:b.mirror,mixStrength:b.mixStrength,color:new o(b.color),map:l[0],normalMap:l[1],normalScale:new r(5,5),fog:y.value.fog,dithering:!0}),R.uniforms.tReflect=s.renderTargetUniform,R.uniforms.uMatrix=s.textureMatrixUniform;const u=new t(10,10);G=new i(u,R),G.name="reflectorShaderMesh",G.position.y=-.01,G.rotation.x=-Math.PI/2,G.add(s),G.onBeforeRender=(e,r,o)=>{G.visible=!1,m(r),s.update(e,r,o),m(r,!1),G.visible=!0},H=new a(9.5,10),H.visible=b.showGridHelper}}),p(()=>{b.reflectivity&&R&&(R.uniforms.uReflectivity.value=b.reflectivity),b.mirror&&R&&(R.uniforms.uMirror.value=b.mirror),b.mixStrength&&R&&(R.uniforms.uMixStrength.value=b.mixStrength),b.color&&R&&(R.uniforms.uColor.value=new o(b.color))}),c(()=>b.showGridHelper,e=>{H.visible=e}),(e,r)=>v(_)?g("",!0):(w(),d("TresGroup",j,[h("primitive",{object:v(G)},null,8,x),h("primitive",{object:v(H),position:[0,.01,0]},null,8,S)]))}});export{b as _};
