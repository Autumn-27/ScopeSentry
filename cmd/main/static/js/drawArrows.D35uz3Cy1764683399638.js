import{F as e,K as n}from"./@tresjs.CJvYCGUA1764683399638.js";import{P as t}from"./tweakpane.CqZAnw7f1764683399638.js";import{d as a,a as o,q as s,a3 as i,r,b as l,e as c,o as u,f as d,I as w,h as m,u as p,a9 as f,aa as v,ah as h,m as b}from"./@vue.DjQnunkc1764683399638.js";import{m as g,d as j,p as P,y as k,a6 as x,o as y,V as L,bz as M,ac as _,a4 as A,f as E}from"./three.BbguFgn81764683399638.js";import"./postprocessing.DjqPXL_K1764683399638.js";import"./@vueuse.BBrxj3Xz1764683399638.js";const C=a({__name:"drawArrows",setup(n){const{camera:a,scene:r}=e(),l=o(new g),c=new j,u=[];o(null);const d=new P(200,200),w=new k({color:65280,side:x}),m=new y(d,w);m.rotation.set(0,0,Math.PI/2),r.value.add(m);let p="";let f=function(e){e.preventDefault(),window.removeEventListener("click",v,!1),window.removeEventListener("contextmenu",f,!1)},v=function(e){c.x=e.clientX/window.innerWidth*2-1,c.y=-e.clientY/window.innerHeight*2+1,l.value.setFromCamera(c,a.value);const n=l.value.intersectObject(m);if(n.length>0){const e=n[0].point;if(u.push(new L(e.x,e.y,0)),"line"===p)h(n[0].normal)}},h=function(e){if(2==u.length){const n=new M(u),t=new _(n,20,2,8,!1),a=new k({color:16711680}),o=new y(t,a);r.value.add(o);const s=e,i=C(n,s,Math.PI/5);r.value.add(i);const l=C(n,s,-Math.PI/5);r.value.add(l);const c=b(u[1]);r.value.add(c),u.length=0}},b=function(e){const n=new A(1.8,32,32),t=new k({color:16711680}),a=new y(n,t);return a.position.copy(e),a},C=function(e,n,t){const a=new M([e.getPointAt(.8),e.getPointAt(1)]),o=new _(a,30,2,8,!1),s=new k({color:16711680}),i=new y(o,s).clone(),r=new E;return r.add(i),r.position.copy(u[1]),i.position.sub(u[1]),r.rotation.set(Math.abs(n.x)*t,Math.abs(n.y)*t,Math.abs(n.z)*t),r};const I=function(){new t({title:"箭头",expanded:!0}).addFolder({title:"参数(鼠标间断点两个点，分别作为箭头的起点)，点击鼠标右键移除绘制"}).addButton({title:"绘制箭头",label:"激活"}).on("click",()=>{window.removeEventListener("click",v,!1),window.addEventListener("contextmenu",f,!1),p="line",window.addEventListener("click",v,!1)})};return s(()=>{I()}),i(()=>{}),(e,n)=>null}}),I=a({__name:"drawArrows",setup(e){const t=r({windowSize:!0,alpha:!0,antialias:!0}),a=r({enableDamping:!0,enableZoom:!0,enablePan:!0,enableRotate:!0,makeDefault:!0});return(e,o)=>{const s=l("TresCanvas");return u(),c(s,b({clearColor:"#201919"},t),{default:d(()=>[o[0]||(o[0]=w("TresPerspectiveCamera",{fov:60,near:.1,far:2e3,position:[0,0,200],"look-at":[0,0,0]},null,-1)),o[1]||(o[1]=w("TresAmbientLight",{intensity:2},null,-1)),m(p(n),f(v(a)),null,16),(u(),c(h,null,{default:d(()=>[m(C)]),_:1}))]),_:1},16)}}});export{I as default};
