import{_ as e,K as a}from"./@tresjs.CJvYCGUA1764683399638.js";import{i}from"./index.DM693cYN1764683399638.js";import{_ as s}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.u89pth7i1764683399638.js";import{P as t}from"./tweakpane.CqZAnw7f1764683399638.js";import{b as l}from"./buildFlexiblePipe.lLLJH-It1764683399638.js";import{d as r,a as n,w as o,G as d,o as m,I as p,r as u,b as g,e as f,f as c,h,u as j,a9 as b,aa as v,m as x}from"./@vue.DjQnunkc1764683399638.js";import{aa as y,V as w,b as L,aE as _,a6 as B}from"./three.BbguFgn81764683399638.js";import"./postprocessing.DjqPXL_K1764683399638.js";import"./@vueuse.BBrxj3Xz1764683399638.js";import"./@fesjs.CQdxRiFD1764683399638.js";import"./vue-router.CW9J5iK31764683399638.js";import"./lodash-es.DWe8oqPO1764683399638.js";import"./pinia.yp40krTn1764683399638.js";import"./@qlin.y-0Z8WnK1764683399638.js";import"./@babel.BPq7uOAK1764683399638.js";import"./@floating-ui.Bhq4ibgf1764683399638.js";import"./@juggle.Vc7cP4_P1764683399638.js";import"./chalk.BHLFMujs1764683399638.js";/* empty css                                 */import"./iconify-icon.Dg3Wmqac1764683399638.js";import"./@iconify.Db0UMRdG1764683399638.js";import"./vite-plugin-qiankun.B06WoCqG1764683399638.js";import"./dompurify.C4MEnGDh1764683399638.js";import"./color.D_UQSrzA1764683399638.js";import"./color-string.cWrXb_cU1764683399638.js";import"./color-name.gyPnsvCn1764683399638.js";import"./lodash.OvYRBTRe1764683399638.js";import"./@amap.fjyZdsU91764683399638.js";import"./object-hash.C0HZ2EUZ1764683399638.js";import"./jszip.CqykFGTv1764683399638.js";import"./oimophysics.CfVKSiAm1764683399638.js";import"./three-stdlib.CqpxBIJB1764683399638.js";import"./@pmndrs.CRF-_adI1764683399638.js";import"./axios.Bl1IyXmH1764683399638.js";import"./dither.glsl.tNAdkJUa1764683399638.js";import"./Reflector.DiEbG3XV1764683399638.js";const T={renderOrder:9999},A=["args"],R=["color","side","map"],M=r({__name:"flexiblePipe",props:{color:{default:"0xff0000"},radius:{default:.1},bodyLength:{default:2},headLength:{default:1},headAngle:{default:0},radialSegments:{default:16},tailAngle:{default:0},tailLength:{default:.5},filletRadius:{default:.3},speed:{default:.01}},setup(a){const s=a,t=n(new y);o(()=>[s.bodyLength,s.headLength,s.headAngle,s.tailAngle,s.tailLength,s.filletRadius,s.radialSegments],([e,a,i,s,r,n,o])=>{const d=e/2,m=new w(0,0,-d),p=new w(0,0,d),u=L.degToRad(i),g=new w(Math.cos(u),Math.sin(u),0),f=p.clone().add(g.multiplyScalar(a)),c=L.degToRad(s),h=new w(Math.cos(c),Math.sin(c),0),j=[m.clone().add(h.multiplyScalar(r)),m,p,f];t.value=l(j,n,o)},{immediate:!0}),i.getResource("TextureLoader","./plugins/digitalCity/image/line.png","line.png");const r=i.getReactiveItem("line.png"),u=n(null);o(r,e=>{e?.isTexture&&(u.value=e.clone(),u.value.wrapS=u.value.wrapT=_,u.value.needsUpdate=!0)},{immediate:!0});const g=n(null),{onBeforeRender:f}=e();return f(()=>{u.value&&(u.value.offset.x-=s.speed)}),(e,a)=>(m(),d("TresMesh",T,[p("TresTubeGeometry",{args:[t.value,64,e.radius,e.radialSegments,!1]},null,8,A),p("TresMeshBasicMaterial",{ref_key:"tmsmRef",ref:g,color:e.color,metalness:.3,roughness:.5,side:B,transparent:"",map:u.value?u.value:null},null,8,R)]))}}),S=r({__name:"flexiblePipePage",setup(e){const i={clearColor:"#15151a",antialias:!1,logarithmicDepthBuffer:!0},l={autoRotate:!0},r=u({color:"#ff0000",radius:.1,bodyLength:2,headLength:1,tailLength:.5,headAngle:0,radialSegments:16,tailAngle:0,speed:.01}),n=new t({title:"参数"});return n.addBinding(r,"color",{label:"颜色"}),n.addBinding(r,"radius",{label:"管道粗细",min:.001,max:1,step:.001}),n.addBinding(r,"bodyLength",{label:"中间长度",min:.1,max:10,step:.1}),n.addBinding(r,"headLength",{label:"前段长度",min:0,max:10,step:.1}),n.addBinding(r,"headAngle",{label:"前段角度",min:0,max:359,step:1}),n.addBinding(r,"tailLength",{label:"后段长度",min:0,max:10,step:.1}),n.addBinding(r,"tailAngle",{label:"后段角度",min:0,max:359,step:1}),n.addBinding(r,"radialSegments",{label:"管平滑",min:2,max:16,step:1}),n.addBinding(r,"speed",{label:"速度",min:-.1,max:.1,step:.001}),(e,t)=>{const n=g("TresCanvas");return m(),f(n,x(i,{"window-size":""}),{default:c(()=>[t[0]||(t[0]=p("TresPerspectiveCamera",{position:[0,10,15],fov:25,near:.1,far:1e4},null,-1)),h(j(a),b(v(l)),null,16),t[1]||(t[1]=p("TresAmbientLight",{color:"#ffffff",intensity:2},null,-1)),h(j(s),{position:[0,-1.562,0],reflectivity:2.6,showGridHelper:!1,scale:1.5}),h(M,b(v(r)),null,16)]),_:1},16)}}});export{S as default};
