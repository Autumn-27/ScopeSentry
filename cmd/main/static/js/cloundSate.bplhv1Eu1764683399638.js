import{F as e,K as a}from"./@tresjs.CJvYCGUA1764683399638.js";import{p as t,e as o}from"./three-tile.nLdI1RRs1764683399638.js";import{s,c as i,a as r,i as n}from"./informationDiv.BjYFzlWi1764683399638.js";import"./index.DM693cYN1764683399638.js";import{u as p}from"./useTexture.RJnyBWqC1764683399638.js";import{d as l,ad as m,w as c,G as u,o as d,u as h,I as g,r as f,a as j,F as _,e as v,f as y,h as S,m as x,ah as I,b as D,a9 as b,aa as w}from"./@vue.DjQnunkc1764683399638.js";import{c1 as M,k as F,a6 as T,z as G,V as B}from"./three.BbguFgn81764683399638.js";import{P as L}from"./tweakpane.CqZAnw7f1764683399638.js";import"./postprocessing.DjqPXL_K1764683399638.js";import"./@vueuse.BBrxj3Xz1764683399638.js";/* empty css                                                                                    */import"./@fesjs.CQdxRiFD1764683399638.js";import"./vue-router.CW9J5iK31764683399638.js";import"./lodash-es.DWe8oqPO1764683399638.js";import"./pinia.yp40krTn1764683399638.js";import"./@qlin.y-0Z8WnK1764683399638.js";import"./@babel.BPq7uOAK1764683399638.js";import"./@floating-ui.Bhq4ibgf1764683399638.js";import"./@juggle.Vc7cP4_P1764683399638.js";import"./chalk.BHLFMujs1764683399638.js";/* empty css                                 */import"./iconify-icon.Dg3Wmqac1764683399638.js";import"./@iconify.Db0UMRdG1764683399638.js";import"./vite-plugin-qiankun.B06WoCqG1764683399638.js";import"./dompurify.C4MEnGDh1764683399638.js";import"./color.D_UQSrzA1764683399638.js";import"./color-string.cWrXb_cU1764683399638.js";import"./color-name.gyPnsvCn1764683399638.js";import"./lodash.OvYRBTRe1764683399638.js";import"./@amap.fjyZdsU91764683399638.js";import"./object-hash.C0HZ2EUZ1764683399638.js";import"./jszip.CqykFGTv1764683399638.js";import"./oimophysics.CfVKSiAm1764683399638.js";import"./three-stdlib.CqpxBIJB1764683399638.js";import"./@pmndrs.CRF-_adI1764683399638.js";import"./axios.Bl1IyXmH1764683399638.js";const k=["position"],C=["scale","material","rotateX","position-y"],A=l({__name:"cloundSateShow",props:{map:{},height:{default:100},color:{default:"#cccccc"},opacity:{default:.6}},async setup(e){let a,t;const o=e,i=new M({displacementMap:new G,transparent:!0,side:T,opacity:o.opacity,color:new F(o.color)});i.onBeforeCompile=e=>{e.vertexShader="uniform sampler2D map;\n\t\t"+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <displacementmap_vertex>","transformed += normalize( objectNormal ) * ( texture2D(map, vMapUv ).a * 0.5 + 0.0 );"),e.fragmentShader=e.fragmentShader.replace("#include <alphamap_fragment>","\n            #include <alphamap_fragment>\n            float h = texture2D(map, vMapUv ).a;\n            diffuseColor.rgb *= h;\n            diffuseColor.a = clamp(diffuseColor.a * 2.0, 0.0, 1.0);\n            ")};const r=o.map.geo2map(new B(105,34,0));r.applyMatrix4(o.map.matrix);const n=s(o.map,{x:67,y:11},{x:140,y:57},1e3*o.height),l=["https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171300.HDF.png","https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171400.HDF.png","https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171500.HDF.png","https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171600.HDF.png"];let f=0;const j=([a,t]=m(()=>p(l)),a=await a,t(),a);i.map=j[f],c(()=>[o.color,o.opacity],([e,a])=>{i.color.setStyle(e),i.opacity=a});let _=null,v=!1;return v?(clearInterval(_),_=null,v=!1):(_=setInterval(()=>{f=f<l.length-1?f+1:0,i.map=j[f],i.needsUpdate=!0,console.log(f)},1e3),v=!0),(e,a)=>(d(),u("TresGroup",{position:[...h(r)]},[g("TresMesh",{scale:[h(n).x,h(n).y,1e3*e.height],material:h(i),rotateX:-Math.PI/2,renderOrder:9999,"position-y":1e3*e.height/5},[...a[0]||(a[0]=[g("TresPlaneGeometry",{args:[1,1,529,420]},null,-1)])],8,C)],8,k))}}),P=["object"],W=l({__name:"mapBoxShow2",setup(a){const s=f({height:500,color:"#cccccc",opacity:.6}),n=new L({title:"参数"});n.addBinding(s,"color",{label:"颜色"}),n.addBinding(s,"height",{label:"高度",min:10,max:5e3,step:10}),n.addBinding(s,"opacity",{label:"透明度",min:0,max:1,step:.1});const p=t.create({imgSource:[new o({style:"6"}),new o({style:"8"})],minLevel:2,maxLevel:18,lon0:90});p.rotateX(-Math.PI/2);const l=new B(105,34,0),m=new B(110,0,1e7),D=p.localToWorld(p.geo2map(l)),b=p.localToWorld(p.geo2map(m)),w=j(),{camera:M,controls:F,scene:T,renderer:G}=e();return M.value&&M.value.position.copy(b),c(()=>F.value,e=>{e&&(e.target.copy(D),i(e,M.value,T.value))}),c(()=>w.value,e=>{e&&e.target.position.copy(D)}),r(M.value,G.domElement,p),(e,a)=>(d(),u(_,null,[g("TresDirectionalLight",{ref_key:"tdLight",ref:w,position:[0,2e3,1e3],intensity:1},null,512),g("primitive",{object:h(p)},null,8,P),(d(),v(I,null,{default:y(()=>[S(A,x({map:h(p)},s),null,16,["map"])]),_:1}))],64))}}),z=l({__name:"cloundSate",setup(e){const t=f({clearColor:"#dbf0ff",alpha:!0,antialias:!1,logarithmicDepthBuffer:!0,precision:"highp"}),o=f({enableDamping:!0,makeDefault:!0,screenSpacePanning:!1,keyPanSpeed:5});return(e,s)=>{const i=D("TresCanvas");return d(),u(_,null,[S(i,x(t,{"window-size":""}),{default:y(()=>[s[0]||(s[0]=g("TresPerspectiveCamera",{position:[0,12,0],fov:70,near:1,far:4e10},null,-1)),S(h(a),b(w(o)),null,16),s[1]||(s[1]=g("TresAmbientLight",{intensity:1},null,-1)),S(W)]),_:1},16),S(n)],64)}}});export{z as default};
