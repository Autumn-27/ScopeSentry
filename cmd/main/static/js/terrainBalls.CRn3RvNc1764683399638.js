import{p as e,a6 as a,ad as s,A as t,d7 as r}from"./three.BbguFgn81764683399638.js";import{_ as o,K as n,d as l}from"./@tresjs.CJvYCGUA1764683399638.js";import{c as i}from"./simplex-noise.DjdePFRN1764683399638.js";import{W as p,S as u,B as m,H as h,V as d}from"./cannon-es.D0mCsqyd1764683399638.js";import{d as c,a as f,G as g,o as y,I as w,e as v,H as T,F as S,W as _,u as G,r as M,t as j,a3 as B,f as b,h as k,a9 as x,aa as A,m as C}from"./@vue.DjQnunkc1764683399638.js";import"./postprocessing.DjqPXL_K1764683399638.js";import"./@vueuse.BBrxj3Xz1764683399638.js";const D=c({__name:"terrainBallsCannon",props:{sphereGroup:{default:null},plane:{default:null}},setup(e){const a=e,s=new p;s.gravity.set(0,-9.82,0);const t=[];a.sphereGroup.children.forEach(e=>{const a=e.geometry.parameters.radius,r=new u(a),o=new m({mass:1});o.addShape(r),o.position.copy(e.position),t.push(o),s.addBody(o)});let r=[];const n=a.plane.geometry.getAttribute("position"),l=a.plane.geometry.parameters.widthSegments+1,i=a.plane.geometry.parameters.heightSegments+1;for(let o=0;o<i;o++)r.push([]);for(let o=0;o<l;o++)for(let e=0;e<i;e++)r[e][o]=n.getZ((l-1-o)*i+e);const c=new h(r,{elementSize:a.plane.geometry.parameters.width/(l-1)}),f=new m({mass:0});f.addShape(c,new d(-a.plane.geometry.parameters.width/2,-a.plane.geometry.parameters.height/2,0)),f.quaternion.set(...a.plane.quaternion.toArray()),s.addBody(f);const{onRender:g}=o();return g(({delta:e})=>{s.fixedStep(1/120,e),t.forEach((e,s)=>{a.sphereGroup.children[s].position.copy(e.position)})}),(e,a)=>null}}),L=["position"],R=["geometry","rotation-x"],z=["side"],P=c({__name:"terrainBallsThree",setup(s){const t=f(),r=f(),o=i(),n=(e,a)=>1.2*(3.2*o(.1*e,.1*a)+.2*o(.3*e,.3*a)),l=new e(100,100,49,49),p=l.getAttribute("position");for(var u=0;u<p.count;u++)p.setZ(u,n(p.getX(u),p.getY(u)));return l.computeBoundingSphere(),l.computeVertexNormals(),console.log(l),(e,s)=>(y(),g(S,null,[w("TresGroup",{ref_key:"sphereGroupRef",ref:t},[(y(),g(S,null,_(10,e=>(y(),g(S,{key:e},[(y(),g(S,null,_(10,a=>w("TresMesh",{key:a,position:[10*e-55,26,10*a-55],"cast-shadow":""},[...s[0]||(s[0]=[w("TresSphereGeometry",{args:[.6,16,16]},null,-1),w("TresMeshStandardMaterial",{color:"#ffffff"},null,-1)])],8,L)),64))],64))),64))],512),w("TresMesh",{ref_key:"planeRef",ref:r,geometry:G(l),"rotation-x":-Math.PI/2,"receive-shadow":""},[w("TresMeshPhysicalMaterial",{roughness:1,metalness:0,color:"gray",side:a},null,8,z)],8,R),r.value?(y(),v(D,{key:0,sphereGroup:t.value,plane:r.value},null,8,["sphereGroup","plane"])):T("",!0)],64))}}),Z=c({__name:"terrainBalls",setup(e){const a=M({clearColor:"#201919",shadows:!0,alpha:!1,shadowMapType:r,outputColorSpace:t,toneMapping:s}),o=M({enableDamping:!0,dampingFactor:.05,enableZoom:!0,autoRotate:!1}),i=j();return B(()=>{i.value&&(i.value.shadow.mapSize.set(1e3,1e3),i.value.shadow.camera.near=.5,i.value.shadow.camera.far=5e4,i.value.shadow.camera.top=20,i.value.shadow.camera.right=20,i.value.shadow.camera.left=-20,i.value.shadow.camera.bottom=-20)}),(e,s)=>(y(),v(G(l),C(a,{"window-size":""}),{default:b(()=>[s[0]||(s[0]=w("TresPerspectiveCamera",{position:[110,70,20],fov:45,near:.1,far:1e3},null,-1)),k(G(n),x(A(o)),null,16),s[1]||(s[1]=w("TresAmbientLight",{intensity:2},null,-1)),w("TresDirectionalLight",{ref_key:"TDirectionalLight",ref:i,position:[10,8,4],intensity:2,"cast-shadow":""},null,512),s[2]||(s[2]=w("TresDirectionalLight",{position:[10,2,4],intensity:2,"cast-shadow":""},null,-1)),k(P)]),_:1},16))}});export{Z as default};
