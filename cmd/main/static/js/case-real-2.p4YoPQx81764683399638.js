import{ad as e,A as a,d7 as t,a6 as r,aE as s}from"./three.BbguFgn81764683399638.js";import{T as o,G as i,H as l,c as n,r as u,o as p,$ as d,b as g,Z as m}from"./@icegl.eCZDSHLk1764683399638.js";import{s as f}from"./@tresjs.CJvYCGUA1764683399638.js";import{_ as c}from"./DevTDTTiles.vue_vue_type_script_setup_true_lang.BvRObt5e1764683399638.js";import{d as h,r as v,a as _,c as j,t as y,q as k,b as w,G as b,o as T,I as C,h as M,f as x,e as S,H as O,u as P,ah as E,F as G,W as A,M as B,m as H}from"./@vue.DjQnunkc1764683399638.js";import{_ as I}from"./@fesjs.CQdxRiFD1764683399638.js";import"./postprocessing.DjqPXL_K1764683399638.js";import"./@vueuse.BBrxj3Xz1764683399638.js";import"./vue-router.CW9J5iK31764683399638.js";import"./lodash-es.DWe8oqPO1764683399638.js";import"./pinia.yp40krTn1764683399638.js";import"./@qlin.y-0Z8WnK1764683399638.js";import"./@babel.BPq7uOAK1764683399638.js";import"./@floating-ui.Bhq4ibgf1764683399638.js";import"./@juggle.Vc7cP4_P1764683399638.js";const L=["map","side"],q=["map","side"],z=["map","side","opacity"],D={class:"css2d-label"},J=I(h({__name:"case-real-2",setup(h){const I=v({clearColor:"#201919",shadows:!0,alpha:!1,shadowMapType:t,outputColorSpace:a,toneMapping:e}),J=_({effectProps:{enabled:!1,focusArea:.7,feather:.1},ambientLight:{color:"#fff",intensity:1},directionalLight:{color:"#fff",intensity:2,position:[-1500,500,500]},background:"/plugins/earthSample/image/menuA/bg-img.png"}),N=_({heading:90,pitch:-45,distance:27e4,longitude:116.31635810091619,latitude:40.125336671652086}),F=_(""),U=_(""),V=j(()=>U.value||F.value),W=y(),Z=y(),$=y([]);k(()=>{fetch("/plugins/geokit/json/110000.json").then(e=>e.json()).then(e=>{Z.value=e,$.value=e.features[0].geometry.coordinates[0][0].map(e=>({lon:e[0],lat:e[1],height:5100}))}).catch(e=>{console.error("Error loading Beijing GeoJSON:",e)}),fetch("/plugins/geokit/json/110000.children.json").then(e=>e.json()).then(e=>{W.value=e}).catch(e=>{console.error("Error loading Beijing GeoJSON:",e)})});return(e,a)=>{const t=w("TresCanvas");return T(),b(G,null,[a[3]||(a[3]=C("p",{class:"video-link"},[C("a",{href:"https://www.bilibili.com/video/BV11C8GziEiH",target:"_blank"},"视频教学")],-1)),M(t,H(I,{"window-size":""}),{default:x(()=>[a[2]||(a[2]=C("TresPerspectiveCamera",{fov:45,near:.1,far:1e3,"look-at":[0,0,0]},null,-1)),M(P(o)),M(P(i),{position:N.value,"onUpdate:position":a[0]||(a[0]=e=>N.value=e),"min-distance":1},null,8,["position"]),M(P(l),{sceneConfig:J.value},null,8,["sceneConfig"]),M(c),(T(),S(E,null,{default:x(()=>[M(P(f),{path:"/plugins/geokit/image/110000.bg.jpg"},{default:x(({state:e})=>[M(P(n),{texture:e},null,8,["texture"]),Z.value?(T(),S(P(u),{key:0,geometry:Z.value.features[0].geometry,height:5e3,renderOrder:10},{default:x(()=>[C("TresMeshStandardMaterial",{map:e,side:P(r),transparent:"","depth-write":!1},null,8,L)]),_:2},1032,["geometry"])):O("",!0)]),_:1})]),_:1})),(T(),S(E,null,{default:x(()=>[M(P(f),{path:"/plugins/digitalCity/image/line2.png"},{default:x(({state:e})=>[M(P(n),{texture:e,rotation:-Math.PI/2,center:[.2,.5]},null,8,["texture","rotation"]),Z.value?(T(),S(P(p),{key:0,geometry:Z.value.features[0].geometry,height:5e3,renderOrder:10},{default:x(()=>[C("TresMeshStandardMaterial",{map:e,side:P(r),transparent:"","depth-write":!1},null,8,q)]),_:2},1032,["geometry"])):O("",!0)]),_:1})]),_:1})),$.value.length?(T(),S(E,{key:0},{default:x(()=>[M(P(f),{path:"/plugins/digitalCity/image/flyLine4.png"},{default:x(({state:e})=>[M(P(n),{texture:e,wrapT:P(s),wrapS:P(s)},null,8,["texture","wrapT","wrapS"]),M(P(d),{duration:2e3},{default:x(()=>[M(P(g),{points:$.value,width:500,renderOrder:50,color:"#0057ff",map:e},null,8,["points","map"])]),_:2},1024)]),_:1})]),_:1})):O("",!0),W.value?(T(),S(E,{key:1},{default:x(()=>[M(P(f),{path:"/plugins/floor/image/concrete_wet_floor_basecolor.jpg"},{default:x(({state:e})=>[M(P(n),{texture:e},null,8,["texture"]),(T(!0),b(G,null,A(W.value.features,(t,s)=>(T(),b(G,{key:s},[t?(T(),S(P(u),{key:0,geometry:t.geometry,height:5e3,renderOrder:20,onPointerenter:e=>F.value=t.properties?.name,onPointerleave:a[1]||(a[1]=e=>F.value=""),onClick:e=>{return a=t.properties?.name,void(a&&(U.value!==a?U.value=a:U.value=""));var a}},{default:x(()=>[C("TresMeshStandardMaterial",{map:e,side:P(r),transparent:"",opacity:V.value===t.properties?.name?.7:0,"depth-write":!1},null,8,z)]),_:2},1032,["geometry","onPointerenter","onClick"])):O("",!0),(V.value?V.value===t.properties?.name:N.value.distance<6e5)?(T(),S(P(m),{key:1,point:{lon:t.properties?.centroid[0],lat:t.properties?.centroid[1],height:9e3}},{default:x(()=>[C("div",D,B(t.properties?.name),1)]),_:2},1032,["point"])):O("",!0)],64))),128))]),_:1})]),_:1})):O("",!0)]),_:1},16)],64)}}}),[["__scopeId","data-v-e7f12df0"]]);export{J as default};
